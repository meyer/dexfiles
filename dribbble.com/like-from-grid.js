// Generated by CoffeeScript 1.6.3
(function() {
  var profile_url, shot, _fn, _i, _len;

  profile_url = $('#t-profile>a').attr('href');

  if (typeof SHOTS !== 'undefined') {
    _fn = function(shot) {
      var $li, $shot, shotTitle;
      $shot = $("#screenshot-" + shot.id);
      shotTitle = $('.dribbble-over strong', $shot).text();
      $li = $('li.fav', $shot);
      return $li.children('a').click(function() {
        var $a, post_obj;
        $a = $(this);
        post_obj = {
          data: {},
          type: 'POST',
          url: "" + profile_url + "/likes"
        };
        if (shot.liked) {
          post_obj.data = {
            _method: 'delete'
          };
          post_obj.url = "" + post_obj.url + "/" + shot.id;
        } else {
          post_obj.url = "" + post_obj.url + "?screenshot_id=" + shot.id;
        }
        $.ajax(post_obj).complete(function(x, status) {
          if (status === 'success') {
            if (shot.liked) {
              $li.removeClass('marked');
              $a.text(--shot.likes_count);
              shot.liked = false;
              return console.log("Succesfully unliked shot " + shot.id + ": “" + shotTitle + "”");
            } else {
              $li.addClass('marked');
              $a.text(++shot.likes_count);
              shot.liked = true;
              return console.log("Succesfully liked shot " + shot.id + ": “" + shotTitle + "”");
            }
          } else {
            return console.log("Fuck.");
          }
        });
        return false;
      });
    };
    for (_i = 0, _len = SHOTS.length; _i < _len; _i++) {
      shot = SHOTS[_i];
      _fn(shot);
    }
  }

}).call(this);
